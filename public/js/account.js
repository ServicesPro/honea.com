function setOnClick(){saveDetail.addEventListener("click",function(){var e,t=detailText.value;if(""==t);else{bgModal.style.display="none",popupDiv.className="popupLoading",e=1==detailType?{nom:t}:{lieux:t};let o=database.collection(pays).doc("Users").collection("List").doc(firebase.auth().currentUser.uid);o.update(e).then(function(e){1==detailType?localStorage.setItem("username",t):localStorage.setItem("lieux",t),window.location.href="/compte.html"}).catch(function(e){popupDiv.className="popupLoadingClose",alert("Une erreur s'est produite: "+e),console.log(e)})}}),document.querySelector(".closePopup").addEventListener("click",function(){bgModal.style.display="none"}),document.querySelector("#editNom").addEventListener("click",function(){modalText.textContent="Veuillez renseigner votre nom",bgModal.style.display="flex",detailType=1}),document.querySelector("#editAddress").addEventListener("click",function(){modalText.textContent="Veuillez renseigner votre adresse",bgModal.style.display="flex",detailType=2}),document.querySelector("body").addEventListener("click",function(){drawerMenu.style.transform="translateX(-100%)",document.querySelector("body").style.position="initial"}),btn_logout.addEventListener("click",function(){firebase.auth().signOut().then(function(){localStorage.setItem("username",""),localStorage.setItem("userphone",""),localStorage.setItem("lieux",void 0),localStorage.setItem("uid",void 0),localStorage.setItem("pays",void 0),window.location.href="/connection.html"})}),productSave.addEventListener("click",function(){localStorage.setItem("recent","save"),window.location.href="/recent.html"}),document.querySelector("#drawerSave").addEventListener("click",function(){localStorage.setItem("recent","save"),window.location.href="/recent.html"}),document.querySelector("#notification").addEventListener("click",function(){let e=localStorage.getItem("username");window.location.href=null!=e&&""!=e?"/notification.html":"/connection.html"}),document.querySelector("#productVue").addEventListener("click",function(){localStorage.setItem("recent","vue"),window.location.href="/recent.html"}),document.querySelector("#drawerRecent").addEventListener("click",function(){localStorage.setItem("recent","vue"),window.location.href="/recent.html"}),document.querySelector("#drawerOrder").addEventListener("click",function(){let e=localStorage.getItem("username");window.location.href=null!=e&&""!=e?"/commande.html":"/connection.html"}),document.querySelector("#drawerBuy").addEventListener("click",function(){let e=localStorage.getItem("username");window.location.href=null!=e&&""!=e?"/historique.html":"/connection.html"}),document.querySelector("#logout").addEventListener("click",function(){let e=localStorage.getItem("username");null!=e&&""!=e?firebase.auth().signOut().then(function(){localStorage.setItem("username",""),localStorage.setItem("userphone",""),localStorage.setItem("lieux",void 0),localStorage.setItem("uid",void 0),localStorage.setItem("pays",void 0),window.location.href="/"}):alert("Vous n'est pas connecter")}),closeDrawer.addEventListener("click",function(){drawerMenu.style.transform="translateX(-100%)",document.querySelector("body").style.position="initial"})}function checkCart(){cart=JSON.parse(localStorage.getItem("cart")),null==cart||0==cart.cartProduct.length?(cart={cartProduct:[]},count.style.display="none"):(count.style.display="inline",count.textContent=cart.cartProduct.length)}function getTopProduct(){let e=1;database.collection(pays+"/Produit/List").where("popularity","==",!0).orderBy("popularityTime","desc").limit(6).get().then(function(t){t.docs.forEach(function(t){const o=document.querySelector("#topProduct");o.querySelector(".item"+e);let n=o.querySelector(".productItem.item"+e+" a"),r=o.querySelector(".productItem.item"+e+" img"),c=o.querySelector(".productItem.item"+e+" .productName"),a=o.querySelector(".productItem.item"+e+" .productPrice"),l=o.querySelector(".productItem.item"+e+" .promoPrice"),i=o.querySelector(".productItem.item"+e+" .promoCard");n.setAttribute("data-id",t.id),r.src=t.data().thumb,c.textContent=t.data().nom,null!=t.data().promoCount&&0!=t.data().promoCount?(a.innerHTML=t.data().prix.toLocaleString()+" FCFA",l.innerHTML="<del>"+t.data().oldPrix.toLocaleString()+" FCFA</del>",i.textContent=t.data().promoCount+"%",i.style.display="inline-flex"):(a.textContent=t.data().prix.toLocaleString()+" FCFA",a.style.paddingBottom="16px"),n.href=createHref(t.data().nom_search,t.data().id),e++})})}function checkDevice(){/iPhone|iPad|iPod|Android/.test(window.navigator.userAgent)}var firebaseConfig={apiKey:"AIzaSyCAjf5FkLQCFAuI1ai9l1xYrr_BUCCL0n4",authDomain:"bestdistribution-169c9.firebaseapp.com",databaseURL:"https://bestdistribution-169c9.firebaseio.com",projectId:"bestdistribution-169c9",storageBucket:"bestdistribution-169c9.appspot.com",messagingSenderId:"908399684323",appId:"1:908399684323:web:ccf5182870d4fcce62f3d6"};firebase.initializeApp(firebaseConfig);const database=firebase.firestore(),auth=firebase.auth();firebase.auth().onAuthStateChanged(function(e){e||(localStorage.setItem("username",""),localStorage.setItem("userphone",""),localStorage.setItem("lieux",void 0),localStorage.setItem("uid",void 0),localStorage.setItem("pays",void 0),window.location.href="/connection.html")});const drawerIcon=document.querySelector("#drawerIcon"),closeDrawer=document.querySelector(".close"),pName=document.querySelector(".pName"),pPhone=document.querySelector(".pPhone"),btn_logout=document.querySelector(".btn_logout"),count=document.querySelector(".count"),productSave=document.querySelector("#productSave"),saveDetail=document.querySelector(".wrapper3"),detailText=document.querySelector("#detailText"),bgModal=document.querySelector(".bgModal"),modalText=document.querySelector(".wrapper2 h1");let cart;var detailType;checkCart(),getTopProduct(),setOnClick();